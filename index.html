ì•„ë˜ëŠ” **ë„ˆê°€ ì˜¬ë¦° ì½”ë“œì— â€œë°”ë¡œ ì ìš©í•´ì„œâ€** ì“¸ë§Œí•œ ê²ƒë“¤(ì´ìŠˆ ë²„íŠ¼/í‘œì‹œ, Status Reportì—ì„œ ì´ìŠˆ ë‚´ìš© ë…¸ì¶œ, CSV ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° ì‹œ ì´ìŠˆ í¬í•¨, TC ë§í¬/ë³µì‚¬ ë²„íŠ¼ ë…¸ì¶œ)ì„ **ì „ë¶€ í•©ì³ì„œ í•œ íŒŒì¼ë¡œ ì •ë¦¬í•œ ë²„ì „**ì´ì•¼.
ê·¸ëƒ¥ **í†µì§¸ë¡œ ë³µë¶™**í•´ì„œ ì“°ë©´ ë¼.

> âœ… ì ìš©ëœ ê²ƒ ìš”ì•½
>
> * TC í…Œì´ë¸”ì— **ë§í¬ ë³µì‚¬(ğŸ”—)** ë²„íŠ¼ ì¶”ê°€
> * TC í…Œì´ë¸”ì— **ì´ìŠˆ ì—´(âš ï¸)** ì¶”ê°€: fail/blockì¼ ë•Œ ë°”ë¡œ ì´ìŠˆ ëª¨ë‹¬ ì—´ê¸° + ìˆ˜ë™ìœ¼ë¡œë„ ì—´ ìˆ˜ ìˆìŒ
> * Status Report íƒ­ì—ì„œ **Fail/Block ì´ìŠˆ ë‚´ìš©ì„ í•¨ê»˜ ë³´ì—¬ì¤Œ**(severity/ë‚´ìš©/ì²¨ë¶€ëª…)
> * CSV **Export/Importì— ì´ìŠˆ ì»¬ëŸ¼ í¬í•¨**(ì œëª©/ë‚´ìš©/ì¤‘ìš”ë„/ì²¨ë¶€ëª…)

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QA TMS (Quality Assurance Dashboard)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .highlight-row { background-color: #fef9c3; transition: background-color 0.8s ease; }
    section[data-section] { scroll-margin-top: 96px; }
    .drop-indicator-top { box-shadow: inset 0 3px 0 0 #3b82f6; }
    .drop-indicator-bottom { box-shadow: inset 0 -3px 0 0 #3b82f6; }
    .row-enter { animation: rowEnter 0.35s ease; }
    @keyframes rowEnter { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDglMEBLr011isuOTEl8hwu-o23oIM6WUk",
      authDomain: "my-test-tool.firebaseapp.com",
      projectId: "my-test-tool",
      storageBucket: "my-test-tool.firebasestorage.app",
      messagingSenderId: "729796287443",
      appId: "1:729796287443:web:63b40613b74a5809d36d26",
      measurementId: "G-FBLJLHQX34"
    };
    firebase.initializeApp(firebaseConfig);
    window.__fb = {
      auth: firebase.auth(),
      provider: new firebase.auth.GoogleAuthProvider(),
      onAuthStateChanged: firebase.auth().onAuthStateChanged.bind(firebase.auth()),
      signInWithPopup: firebase.auth().signInWithPopup.bind(firebase.auth()),
      signOut: firebase.auth().signOut.bind(firebase.auth())
    };
  </script>
</head>

<body class="bg-slate-50 min-h-screen text-slate-800">
  <div class="max-w-7xl mx-auto p-6">
    <header class="mb-6 flex items-start justify-between gap-4">
      <div>
        <h1 class="text-3xl font-bold text-slate-900">QA ëŒ€ì‰¬ë³´ë“œ</h1>
        <p class="text-slate-500 text-sm mt-1">Quality Assurance Dashboard - í’ˆì§ˆ ë¦¬ìŠ¤í¬ ì¤‘ì‹¬ ê´€ë¦¬</p>
      </div>
      <button id="modeBadge" type="button" class="text-xs font-semibold px-3 py-1 rounded-full bg-slate-100 text-slate-600">ë·°ì–´ ëª¨ë“œ</button>
    </header>

    <div id="sectionNav" class="sticky top-0 z-30 bg-white/95 backdrop-blur border border-slate-200 rounded-2xl px-4 py-2 mb-4 flex flex-wrap items-center gap-2">
      <span class="text-xs font-semibold text-slate-600">ì„¹ì…˜</span>
      <button data-target="dashboardSection" class="section-link text-xs px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">ëŒ€ì‹œë³´ë“œ</button>
      <button data-target="epicTabsSection" class="section-link text-xs px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">ì—í”½ íƒ­</button>
      <button data-target="reportSection" class="section-link text-xs px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">QA ë¦¬í¬íŠ¸</button>
      <span class="ml-auto text-xs text-slate-400">ìŠ¤í¬ë¡¤ ì‹œ ìƒë‹¨ ê³ ì •</span>
    </div>

    <!-- DASHBOARD -->
    <section id="dashboardSection" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-6" data-section>
      <div class="section-content">
        <div class="grid lg:grid-cols-[1.1fr,1fr] gap-6 items-start">
          <div>
            <div class="flex items-center gap-3 mb-4 flex-wrap">
              <h2 id="milestoneTitleDisplay" class="text-3xl font-black text-slate-900 cursor-pointer hover:text-indigo-600 transition-colors">ë§ˆì¼ìŠ¤í†¤ ì œëª©</h2>
              <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full">Global Summary</span>
              <a id="milestoneJiraBadge" href="#" target="_blank" rel="noopener" class="hidden text-xs font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full hover:bg-indigo-100 transition-colors">Jira í˜ì´ì§€ ì´ë™ ğŸ”—</a>
            </div>

            <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-sm max-w-md">
              <div class="flex items-center gap-4">
                <div class="w-28 h-28">
                  <canvas id="milestonePie" height="120"></canvas>
                </div>
                <div class="flex-1">
                  <p class="text-xs text-slate-500">ì™„ë£Œ ë¹„ìœ¨</p>
                  <p id="milestoneMetricText" class="text-2xl font-black text-slate-900">ì™„ë£Œ 0 / 0.00%</p>
                  <div class="mt-4 space-y-2 text-sm">
                    <div class="flex items-center justify-between">
                      <span class="flex items-center gap-2 text-slate-600"><span class="w-2.5 h-2.5 rounded-full bg-emerald-500"></span> ì™„ë£Œ</span>
                      <span id="milestoneLegendComplete" class="font-semibold text-slate-700">0</span>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="flex items-center gap-2 text-slate-600"><span class="w-2.5 h-2.5 rounded-full bg-blue-500"></span> ì§„í–‰ ì¤‘</span>
                      <span id="milestoneLegendInProgress" class="font-semibold text-slate-700">0</span>
                    </div>
                    <div class="flex items-center justify-between">
                      <span class="flex items-center gap-2 text-slate-600"><span class="w-2.5 h-2.5 rounded-full bg-slate-300"></span> í•  ì¼</span>
                      <span id="milestoneLegendTodo" class="font-semibold text-slate-700">0</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="flex flex-col gap-4">
            <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <p class="text-xs uppercase text-slate-400">Epic Progress</p>
                <button id="copyEpicLink" title="ì—í”½ ë§í¬ ë³µì‚¬" class="w-9 h-9 inline-flex items-center justify-center border border-slate-300 rounded-lg text-base hover:bg-slate-50">ğŸ”—</button>
              </div>
              <div class="mt-2 flex items-center gap-2">
                <h3 id="epicTitleDisplay" class="text-2xl font-bold text-slate-900 cursor-pointer hover:underline truncate">ì—í”½ 1</h3>
              </div>
              <div class="grid gap-2 mt-3">
                <input id="epicTitleInput" type="text" class="border border-slate-300 rounded-lg px-3 py-2 text-sm w-full" placeholder="ì—í”½ ì œëª© ì…ë ¥">
                <input id="epicJiraUrl" type="url" class="border border-slate-300 rounded-lg px-3 py-2 text-sm w-full" placeholder="ì—í”½ Jira URL">
              </div>
              <div class="flex items-center gap-6 mt-4">
                <div class="text-center">
                  <p class="text-xs text-slate-400">Fail</p>
                  <p id="epicFailCount" class="text-2xl font-bold text-rose-600">0</p>
                </div>
                <div class="text-center">
                  <p class="text-xs text-slate-400">Block</p>
                  <p id="epicBlockCount" class="text-2xl font-bold text-amber-600">0</p>
                </div>
              </div>
              <div class="mt-3">
                <p class="text-sm font-medium text-slate-600 mb-2">ëˆ„ì  í”„ë¡œê·¸ë ˆìŠ¤</p>
                <div class="h-4 bg-slate-200 rounded-full overflow-hidden flex">
                  <div id="epicBarPass" class="h-full bg-emerald-500 transition-all" style="width:0%"></div>
                  <div id="epicBarFail" class="h-full bg-rose-500 transition-all" style="width:0%"></div>
                  <div id="epicBarBlock" class="h-full bg-amber-500 transition-all" style="width:0%"></div>
                  <div id="epicBarNot" class="h-full bg-slate-300 transition-all" style="width:0%"></div>
                </div>
                <p id="epicProgressText" class="text-sm text-slate-500 mt-1 text-right">0 / 0 ì™„ë£Œ (0%)</p>
              </div>
            </div>

            <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-sm">
              <p class="text-xs uppercase text-slate-400">Task Progress</p>
              <div class="mt-3">
                <p class="text-sm font-medium text-slate-600 mb-2">íƒœìŠ¤í¬ ì§„í–‰ë¥ </p>
                <div class="h-4 bg-slate-200 rounded-full overflow-hidden flex">
                  <div id="taskBarPass" class="h-full bg-emerald-500 transition-all" style="width:0%"></div>
                  <div id="taskBarInProgress" class="h-full bg-blue-500 transition-all" style="width:0%"></div>
                  <div id="taskBarTodo" class="h-full bg-slate-300 transition-all" style="width:0%"></div>
                </div>
                <p id="taskProgressText" class="text-sm text-slate-500 mt-1 text-right">0 / 0 ì™„ë£Œ (0%)</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- EPIC / TASK TABS -->
    <section id="epicTabsSection" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-4" data-section>
      <div class="section-content">
        <div class="flex flex-wrap items-center justify-between gap-3 mb-4">
          <h2 class="text-lg font-semibold text-slate-700 flex items-center gap-2">
            <span class="inline-flex w-4 h-4 items-center justify-center">ğŸ“Œ</span>
            Epic íƒ­
          </h2>
          <div class="ml-auto flex items-center gap-2">
            <button id="addEpicBtn" class="px-3 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700">+ ì—í”½ ì¶”ê°€</button>
            <button id="deleteEpicBtn" class="px-3 py-2 bg-rose-50 text-rose-600 rounded-lg text-sm hover:bg-rose-100">ì—í”½ ì‚­ì œ</button>
            <button id="epicEditToggle" class="text-xs font-semibold px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">í¸ì§‘</button>
          </div>
        </div>
        <div id="epicTabs" class="flex gap-2 overflow-x-auto pb-1 border-b border-slate-200"></div>

        <div class="flex items-center justify-between gap-3 mt-4 mb-2 w-full">
          <h3 class="text-sm font-semibold text-slate-600 flex items-center gap-2">
            <span class="inline-flex w-4 h-4 items-center justify-center">ğŸ§©</span>
            Task íƒ­
          </h3>
          <div class="ml-auto flex items-center gap-2">
            <button id="addTaskBtn" class="px-3 py-2 bg-emerald-600 text-white rounded-lg text-sm hover:bg-emerald-700">+ Task ì¶”ê°€</button>
            <button id="deleteTaskBtn" class="px-3 py-2 bg-rose-50 text-rose-600 rounded-lg text-sm hover:bg-rose-100">Task ì‚­ì œ</button>
            <button id="taskEditToggle" class="text-xs font-semibold px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">í¸ì§‘</button>
          </div>
        </div>
        <div id="taskTabs" class="flex gap-2 overflow-x-auto pb-1 border-b border-slate-200"></div>
      </div>
    </section>

    <!-- REPORT -->
    <section id="reportSection" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6" data-section>
      <div class="section-content">
        <div id="summaryHeader" class="mb-4"></div>

        <div id="reportTabs" class="flex items-center gap-2 mb-3">
          <button data-report-tab="test-cases" class="px-3 py-2 text-xs rounded-lg border bg-slate-900 text-white">Test Cases</button>
          <button data-report-tab="status-report" class="px-3 py-2 text-xs rounded-lg border bg-white text-slate-600 border-slate-200 hover:bg-slate-50">Status Report</button>
        </div>

        <div id="testCasesPanel">
          <div class="flex flex-wrap items-center justify-between gap-2 mb-2">
            <div class="flex flex-wrap items-center gap-2">
              <h2 class="text-lg font-semibold text-slate-700">Test Case</h2>
              <span id="tcCount" class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full">0ê±´</span>
              <div id="tcFilterTabs" class="flex items-center gap-1 bg-slate-100 rounded-full p-1"></div>
            </div>
            <div class="flex items-center gap-2">
              <button id="importCsvBtn" class="px-3 py-2 border border-slate-200 text-slate-600 rounded-lg text-sm hover:bg-slate-50">CSV ë¶ˆëŸ¬ì˜¤ê¸°</button>
              <button id="exportCsvBtn" class="px-3 py-2 border border-slate-200 text-slate-600 rounded-lg text-sm hover:bg-slate-50">CSV ë‚´ë³´ë‚´ê¸°</button>
              <input id="csvFileInput" type="file" accept=".csv,.txt" class="hidden">
              <button id="addTcBtn" class="px-3 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700">+ ìƒˆ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€</button>
              <button id="tableEditToggle" class="text-xs font-semibold px-3 py-1 rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-50 hover:text-indigo-600">í¸ì§‘</button>
            </div>
          </div>

          <div class="overflow-x-auto">
            <table class="w-full min-w-[1250px] text-xs">
              <thead>
                <tr class="border-b border-slate-200 text-slate-600">
                  <th class="text-left py-3 px-2 w-12">No.</th>
                  <th class="text-left py-3 px-2 w-40">ì¤‘ë¶„ë¥˜</th>
                  <th class="text-left py-3 px-2 w-44">Precondition</th>
                  <th class="text-left py-3 px-2 w-52">í…ŒìŠ¤íŠ¸ ë‚´ìš©</th>
                  <th class="text-left py-3 px-2 w-64">ê¸°ëŒ€ ê²°ê³¼</th>
                  <th class="text-left py-3 px-2 w-32">ê²°ê³¼</th>
                  <th class="text-left py-3 px-2 w-56">ë©”ëª¨</th>
                  <th class="text-left py-3 px-2 w-16">ì´ìŠˆ</th>
                  <th class="text-left py-3 px-2 w-20">ì‘ì—…</th>
                </tr>
              </thead>
              <tbody id="tcBody"></tbody>
            </table>
          </div>
        </div>

        <div id="insightsPanel" class="hidden">
          <div id="insightsContent" class="space-y-5"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- MILESTONE MODAL -->
  <div id="milestoneModal" class="fixed inset-0 bg-slate-900/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-lg w-full max-w-md border border-slate-200">
      <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
        <h3 class="text-lg font-semibold text-slate-800">ë§ˆì¼ìŠ¤í†¤ ì •ë³´ ìˆ˜ì •</h3>
        <button id="milestoneModalClose" class="w-8 h-8 rounded-lg text-slate-500 hover:bg-slate-100">âœ•</button>
      </div>
      <div class="px-5 py-4 space-y-4">
        <div>
          <label class="text-xs text-slate-500">ë§ˆì¼ìŠ¤í†¤ ì œëª©</label>
          <input id="milestoneModalTitleInput" type="text" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="ë§ˆì¼ìŠ¤í†¤ ì œëª© ì…ë ¥">
        </div>
        <div>
          <label class="text-xs text-slate-500">ë§ˆì¼ìŠ¤í†¤ Jira URL</label>
          <input id="milestoneModalJiraInput" type="url" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="ë§ˆì¼ìŠ¤í†¤ Jira URL">
        </div>
      </div>
      <div class="flex items-center justify-end gap-2 px-5 py-4 border-t border-slate-100">
        <button id="milestoneModalCancel" class="px-4 py-2 text-sm rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50">ì·¨ì†Œ</button>
        <button id="milestoneModalSave" class="px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-700">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- NEW/EDIT TC MODAL -->
  <div id="newTcModal" class="fixed inset-0 bg-slate-900/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-lg w-full max-w-2xl border border-slate-200">
      <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
        <h3 id="newTcModalTitle" class="text-lg font-semibold text-slate-800">ì‹ ê·œ TC ë“±ë¡</h3>
        <button id="newTcModalClose" class="w-8 h-8 rounded-lg text-slate-500 hover:bg-slate-100">âœ•</button>
      </div>
      <div class="px-5 py-4 space-y-4">
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-500">ì¤‘ë¶„ë¥˜</label>
            <input id="newTcMiddle" type="text" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="ì¤‘ë¶„ë¥˜">
          </div>
          <div>
            <label class="text-xs text-slate-500">Precondition</label>
            <input id="newTcPrecondition" type="text" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="Precondition">
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-500">í…ŒìŠ¤íŠ¸ ë‚´ìš©</label>
            <textarea id="newTcContent" rows="4" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm resize-none" placeholder="í…ŒìŠ¤íŠ¸ ë‚´ìš©"></textarea>
          </div>
          <div>
            <label class="text-xs text-slate-500">ê¸°ëŒ€ ê²°ê³¼</label>
            <textarea id="newTcExpected" rows="4" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm resize-none" placeholder="ê¸°ëŒ€ ê²°ê³¼"></textarea>
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-500">ê²°ê³¼</label>
            <select id="newTcStatus" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm bg-white">
              <option value="not_test" selected>Not Test</option>
              <option value="pass">Pass</option>
              <option value="fail">Fail</option>
              <option value="block">Block</option>
              <option value="na">N/A</option>
            </select>
          </div>
          <div>
            <label class="text-xs text-slate-500">ë©”ëª¨</label>
            <input id="newTcMemo" type="text" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="ë©”ëª¨">
          </div>
        </div>
      </div>
      <div class="flex items-center justify-end gap-2 px-5 py-4 border-t border-slate-100">
        <button id="newTcModalCancel" class="px-4 py-2 text-sm rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50">ì·¨ì†Œ</button>
        <button id="newTcModalSave" class="px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-700">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ISSUE MODAL -->
  <div id="issueModal" class="fixed inset-0 bg-slate-900/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-lg w-full max-w-xl border border-slate-200">
      <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
        <h3 class="text-lg font-semibold text-slate-800">ì´ìŠˆ ë“±ë¡</h3>
        <button id="issueModalClose" class="w-8 h-8 rounded-lg text-slate-500 hover:bg-slate-100">âœ•</button>
      </div>
      <div class="px-5 py-4 space-y-4">
        <div>
          <label class="text-xs text-slate-500">ì œëª©</label>
          <input id="issueTitleInput" type="text" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm" placeholder="ì´ìŠˆ ì œëª©">
        </div>
        <div>
          <label class="text-xs text-slate-500">ë‚´ìš©</label>
          <textarea id="issueContentInput" rows="4" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm resize-none" placeholder="ì´ìŠˆ ë‚´ìš©"></textarea>
        </div>
        <div class="grid md:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-500">ì¤‘ìš”ë„</label>
            <select id="issueSeverityInput" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm bg-white">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
              <option value="critical">Critical</option>
            </select>
          </div>
          <div>
            <label class="text-xs text-slate-500">ì²¨ë¶€íŒŒì¼</label>
            <input id="issueAttachmentInput" type="file" class="mt-1 w-full border border-slate-300 rounded-lg px-3 py-2 text-sm bg-white">
            <p id="issueAttachmentNote" class="mt-1 text-xs text-slate-400"></p>
          </div>
        </div>
      </div>
      <div class="flex items-center justify-end gap-2 px-5 py-4 border-t border-slate-100">
        <button id="issueModalCancel" class="px-4 py-2 text-sm rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50">ì·¨ì†Œ</button>
        <button id="issueModalSave" class="px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white hover:bg-indigo-700">ë“±ë¡</button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const STORAGE_KEY = 'qa_tms_state_v1';
      const DEFAULT_MILESTONE_TITLE = 'ë§ˆì¼ìŠ¤í†¤ ì œëª©';

      const state = loadState();
      const fb = window.__fb;
      const ADMIN_EMAIL = "yuyu427j@gmail.com";
      let isAdmin = false;

      let milestonePieChart = null;
      let lastAddedTcId = null;
      let editTcId = null;
      let issueTcId = null;
      let isTableEditMode = false;
      let isEpicEditMode = false;
      let isTaskEditMode = false;
      let statusFilter = null;
      let activeSummaryAction = 'all';
      let activeReportTab = 'test-cases';

      const els = {
        milestoneTitleDisplay: document.getElementById('milestoneTitleDisplay'),
        modeBadge: document.getElementById('modeBadge'),
        milestoneJiraBadge: document.getElementById('milestoneJiraBadge'),
        milestoneModal: document.getElementById('milestoneModal'),
        milestoneModalTitleInput: document.getElementById('milestoneModalTitleInput'),
        milestoneModalJiraInput: document.getElementById('milestoneModalJiraInput'),
        milestoneModalSave: document.getElementById('milestoneModalSave'),
        milestoneModalCancel: document.getElementById('milestoneModalCancel'),
        milestoneModalClose: document.getElementById('milestoneModalClose'),
        milestonePie: document.getElementById('milestonePie'),
        milestoneMetricText: document.getElementById('milestoneMetricText'),
        milestoneLegendComplete: document.getElementById('milestoneLegendComplete'),
        milestoneLegendInProgress: document.getElementById('milestoneLegendInProgress'),
        milestoneLegendTodo: document.getElementById('milestoneLegendTodo'),

        taskBarPass: document.getElementById('taskBarPass'),
        taskBarInProgress: document.getElementById('taskBarInProgress'),
        taskBarTodo: document.getElementById('taskBarTodo'),
        taskProgressText: document.getElementById('taskProgressText'),

        newTcModal: document.getElementById('newTcModal'),
        newTcModalTitle: document.getElementById('newTcModalTitle'),
        newTcModalClose: document.getElementById('newTcModalClose'),
        newTcModalCancel: document.getElementById('newTcModalCancel'),
        newTcModalSave: document.getElementById('newTcModalSave'),
        newTcMiddle: document.getElementById('newTcMiddle'),
        newTcPrecondition: document.getElementById('newTcPrecondition'),
        newTcContent: document.getElementById('newTcContent'),
        newTcExpected: document.getElementById('newTcExpected'),
        newTcStatus: document.getElementById('newTcStatus'),
        newTcMemo: document.getElementById('newTcMemo'),

        issueModal: document.getElementById('issueModal'),
        issueModalClose: document.getElementById('issueModalClose'),
        issueModalCancel: document.getElementById('issueModalCancel'),
        issueModalSave: document.getElementById('issueModalSave'),
        issueTitleInput: document.getElementById('issueTitleInput'),
        issueContentInput: document.getElementById('issueContentInput'),
        issueSeverityInput: document.getElementById('issueSeverityInput'),
        issueAttachmentInput: document.getElementById('issueAttachmentInput'),
        issueAttachmentNote: document.getElementById('issueAttachmentNote'),

        reportTabs: document.getElementById('reportTabs'),
        testCasesPanel: document.getElementById('testCasesPanel'),
        insightsPanel: document.getElementById('insightsPanel'),
        insightsContent: document.getElementById('insightsContent'),

        tcFilterTabs: document.getElementById('tcFilterTabs'),
        epicTabs: document.getElementById('epicTabs'),
        taskTabs: document.getElementById('taskTabs'),
        epicEditToggle: document.getElementById('epicEditToggle'),
        taskEditToggle: document.getElementById('taskEditToggle'),
        epicTitleDisplay: document.getElementById('epicTitleDisplay'),
        epicTitleInput: document.getElementById('epicTitleInput'),
        epicJiraUrl: document.getElementById('epicJiraUrl'),
        epicFailCount: document.getElementById('epicFailCount'),
        epicBlockCount: document.getElementById('epicBlockCount'),
        epicBarPass: document.getElementById('epicBarPass'),
        epicBarFail: document.getElementById('epicBarFail'),
        epicBarBlock: document.getElementById('epicBarBlock'),
        epicBarNot: document.getElementById('epicBarNot'),
        epicProgressText: document.getElementById('epicProgressText'),

        tcBody: document.getElementById('tcBody'),
        tcCount: document.getElementById('tcCount'),
        summaryHeader: document.getElementById('summaryHeader'),

        tableEditToggle: document.getElementById('tableEditToggle'),
        addEpicBtn: document.getElementById('addEpicBtn'),
        deleteEpicBtn: document.getElementById('deleteEpicBtn'),
        addTaskBtn: document.getElementById('addTaskBtn'),
        deleteTaskBtn: document.getElementById('deleteTaskBtn'),
        addTcBtn: document.getElementById('addTcBtn'),
        importCsvBtn: document.getElementById('importCsvBtn'),
        exportCsvBtn: document.getElementById('exportCsvBtn'),
        csvFileInput: document.getElementById('csvFileInput'),
        copyEpicLink: document.getElementById('copyEpicLink')
      };

      function loadState() {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return {
            milestoneTitle: DEFAULT_MILESTONE_TITLE,
            milestoneJiraUrl: '',
            epics: [{ id: createId('epic'), name: 'ì—í”½ 1', jiraUrl: '', tasks: [{ id: createId('task'), name: 'Task 1', tcs: [] }] }],
            activeEpicId: null,
            activeTaskId: null,
            tcCounter: 0
          };
        }
        try {
          const parsed = JSON.parse(raw);
          if (!parsed.epics || parsed.epics.length === 0) {
            parsed.epics = [{ id: createId('epic'), name: 'ì—í”½ 1', jiraUrl: '', tasks: [{ id: createId('task'), name: 'Task 1', tcs: [] }] }];
          }
          parsed.epics.forEach(epic => {
            if (!epic.tasks) {
              const legacyTcs = epic.tcs || [];
              epic.tasks = legacyTcs.length > 0 ? [{ id: createId('task'), name: 'Task 1', tcs: legacyTcs }] : [];
              delete epic.tcs;
            }
            (epic.tasks || []).forEach(t => { t.tcs = t.tcs || []; });
          });
          parsed.milestoneTitle = parsed.milestoneTitle || DEFAULT_MILESTONE_TITLE;
          parsed.tcCounter = parsed.tcCounter || 0;
          return parsed;
        } catch (err) {
          return {
            milestoneTitle: DEFAULT_MILESTONE_TITLE,
            milestoneJiraUrl: '',
            epics: [{ id: createId('epic'), name: 'ì—í”½ 1', jiraUrl: '', tasks: [{ id: createId('task'), name: 'Task 1', tcs: [] }] }],
            activeEpicId: null,
            activeTaskId: null,
            tcCounter: 0
          };
        }
      }

      function persist() {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        } catch (err) {
          console.error('ì €ì¥ ì‹¤íŒ¨', err);
          alert('ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì €ì¥ ê³µê°„ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
        }
      }

      function createId(prefix) {
        return prefix + '_' + Date.now().toString(36) + Math.random().toString(36).slice(2, 6);
      }

      function getActiveEpic() {
        let epic = state.epics.find(e => e.id === state.activeEpicId);
        if (!epic) {
          state.activeEpicId = state.epics[0].id;
          epic = state.epics[0];
        }
        return epic;
      }

      function getActiveTask() {
        const epic = getActiveEpic();
        epic.tasks = epic.tasks || [];
        if (epic.tasks.length === 0) { state.activeTaskId = null; return null; }
        let task = epic.tasks.find(t => t.id === state.activeTaskId);
        if (!task) { state.activeTaskId = epic.tasks[0].id; task = epic.tasks[0]; }
        return task;
      }

      function countStatuses(tcs) {
        let pass = 0, fail = 0, block = 0, notTest = 0, na = 0;
        (tcs || []).forEach(tc => {
          if (tc.status === 'pass') pass += 1;
          else if (tc.status === 'fail') fail += 1;
          else if (tc.status === 'block') block += 1;
          else if (tc.status === 'na') na += 1;
          else notTest += 1;
        });
        return { pass, fail, block, notTest, na };
      }

      function renderEpicTabs() {
        els.epicTabs.innerHTML = '';
        state.epics.forEach(epic => {
          const isActive = epic.id === state.activeEpicId;
          const btn = document.createElement('button');
          btn.className = 'px-3 py-2 rounded-lg text-sm border whitespace-nowrap ' +
            (isActive ? 'bg-indigo-50 text-indigo-700 border-indigo-200' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50');
          btn.textContent = epic.name;
          btn.addEventListener('click', () => {
            state.activeEpicId = epic.id;
            const firstTask = epic.tasks && epic.tasks[0];
            state.activeTaskId = firstTask ? firstTask.id : null;
            persist(); renderAll();
          });
          btn.addEventListener('dblclick', () => {
            if (!isAdmin || !isEpicEditMode) return;
            const name = prompt('ì—í”½ ì œëª©ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.', epic.name);
            if (!name) return;
            epic.name = name.trim();
            persist(); renderAll();
          });
          els.epicTabs.appendChild(btn);
        });
      }

      function renderTaskTabs() {
        const epic = getActiveEpic();
        epic.tasks = epic.tasks || [];
        els.taskTabs.innerHTML = '';
        (epic.tasks || []).forEach(task => {
          const isActive = task.id === state.activeTaskId;
          const btn = document.createElement('button');
          btn.className = 'px-3 py-2 rounded-lg text-sm border whitespace-nowrap ' +
            (isActive ? 'bg-white text-indigo-700 border-indigo-300' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50');
          btn.textContent = task.name;
          btn.addEventListener('click', () => { state.activeTaskId = task.id; persist(); renderAll(); });
          btn.addEventListener('dblclick', () => {
            if (!isAdmin || !isTaskEditMode) return;
            const name = prompt('Task ì œëª©ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.', task.name);
            if (!name) return;
            task.name = name.trim();
            persist(); renderAll();
          });
          els.taskTabs.appendChild(btn);
        });
        if (epic.tasks.length > 0 && !state.activeTaskId) state.activeTaskId = epic.tasks[0].id;
        applyEpicTaskEditUI();
      }

      function applyEpicTaskEditUI() {
        const hideEpic = !isAdmin || !isEpicEditMode;
        const epic = getActiveEpic();
        const taskCount = (epic.tasks || []).length;
        const forceShowAddTask = isAdmin && taskCount === 0;
        const hideTask = !isAdmin || (!isTaskEditMode && !forceShowAddTask);

        els.addEpicBtn.classList.toggle('invisible', hideEpic);
        els.deleteEpicBtn.classList.toggle('invisible', hideEpic);
        els.addEpicBtn.classList.toggle('pointer-events-none', hideEpic);
        els.deleteEpicBtn.classList.toggle('pointer-events-none', hideEpic);

        els.addTaskBtn.classList.toggle('invisible', hideTask);
        els.addTaskBtn.classList.toggle('pointer-events-none', hideTask);
        els.deleteTaskBtn.classList.toggle('invisible', hideTask);
        els.deleteTaskBtn.classList.toggle('pointer-events-none', hideTask);

        if (els.taskEditToggle) {
          const hideTaskToggle = !isAdmin || taskCount === 0;
          els.taskEditToggle.classList.toggle('hidden', hideTaskToggle);
        }
        if (taskCount === 0) els.deleteTaskBtn.classList.add('invisible', 'pointer-events-none');
      }

      function renderGlobalDashboard() {
        const allTcs = state.epics.flatMap(e => (e.tasks || []).flatMap(t => t.tcs || []));
        const counts = countStatuses(allTcs);
        const total = allTcs.length;
        const complete = counts.pass;
        const inProgress = counts.fail + counts.block;
        const todo = counts.notTest;
        const pct = total ? (complete / total) * 100 : 0;

        els.milestoneMetricText.textContent = `ì™„ë£Œ ${complete} / ${pct.toFixed(2)}%`;
        els.milestoneLegendComplete.textContent = complete;
        els.milestoneLegendInProgress.textContent = inProgress;
        els.milestoneLegendTodo.textContent = todo;

        const activeTask = getActiveTask();
        const taskCounts = countStatuses(activeTask ? (activeTask.tcs || []) : []);
        const taskTotal = activeTask ? (activeTask.tcs || []).length : 0;
        const taskComplete = taskCounts.pass;
        const taskInProgress = taskCounts.fail + taskCounts.block;
        const taskTodo = taskCounts.notTest;
        const taskPct = taskTotal ? (taskComplete / taskTotal) * 100 : 0;

        const passPct = taskTotal ? (taskComplete / taskTotal) * 100 : 0;
        const inProgressPct = taskTotal ? (taskInProgress / taskTotal) * 100 : 0;
        const todoPct = taskTotal ? (taskTodo / taskTotal) * 100 : 0;

        if (els.taskBarPass) els.taskBarPass.style.width = passPct + '%';
        if (els.taskBarInProgress) els.taskBarInProgress.style.width = inProgressPct + '%';
        if (els.taskBarTodo) els.taskBarTodo.style.width = todoPct + '%';
        if (els.taskProgressText) els.taskProgressText.textContent = `${taskComplete} / ${taskTotal} ì™„ë£Œ (${Math.round(taskPct)}%)`;

        if (!milestonePieChart) {
          const ctx = els.milestonePie.getContext('2d');
          milestonePieChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
              labels: ['ì™„ë£Œ', 'ì§„í–‰ ì¤‘', 'í•  ì¼'],
              datasets: [{ data: [complete, inProgress, todo], backgroundColor: ['#22c55e', '#3b82f6', '#cbd5e1'], borderWidth: 0 }]
            },
            options: { responsive: true, cutout: '70%', plugins: { legend: { display: false } } }
          });
        } else {
          milestonePieChart.data.datasets[0].data = [complete, inProgress, todo];
          milestonePieChart.update('none');
        }
      }

      function renderEpicDashboard() {
        const epic = getActiveEpic();
        els.epicTitleDisplay.textContent = epic.name;
        if (els.epicTitleInput) els.epicTitleInput.value = epic.name;
        if (els.epicJiraUrl) els.epicJiraUrl.value = epic.jiraUrl || '';

        const epicTcs = (epic.tasks || []).flatMap(t => t.tcs || []);
        const counts = countStatuses(epicTcs);
        const done = counts.pass + counts.fail + counts.block;
        const total = epicTcs.length;
        const pct = total ? Math.round((done / total) * 100) : 0;

        els.epicFailCount.textContent = counts.fail;
        els.epicBlockCount.textContent = counts.block;
        els.epicProgressText.textContent = done + ' / ' + total + ' ì™„ë£Œ (' + pct + '%)';

        const passPct = total ? (counts.pass / total) * 100 : 0;
        const failPct = total ? (counts.fail / total) * 100 : 0;
        const blockPct = total ? (counts.block / total) * 100 : 0;
        const notPct = total ? (counts.notTest / total) * 100 : 0;

        els.epicBarPass.style.width = passPct + '%';
        els.epicBarFail.style.width = failPct + '%';
        els.epicBarBlock.style.width = blockPct + '%';
        els.epicBarNot.style.width = notPct + '%';
      }

      function createStatusSelect(value) {
        const select = document.createElement('select');
        select.className = 'border border-slate-300 rounded-lg px-2 py-1 text-sm bg-white';
        const options = [
          { value: 'not_test', label: 'Not Tested' },
          { value: 'pass', label: 'Pass' },
          { value: 'fail', label: 'Fail' },
          { value: 'block', label: 'Block' },
          { value: 'na', label: 'N/A' }
        ];
        options.forEach(opt => {
          const o = document.createElement('option');
          o.value = opt.value;
          o.textContent = opt.label;
          select.appendChild(o);
        });
        select.value = value || 'not_test';
        select.disabled = !isAdmin;
        applyStatusStyle(select);
        return select;
      }

      function applyStatusStyle(select) {
        const base = 'border rounded-lg px-2 py-1 text-sm ';
        const val = select.value;
        if (val === 'pass') select.className = base + 'border-emerald-200 bg-emerald-50 text-emerald-700';
        else if (val === 'fail') select.className = base + 'border-rose-200 bg-rose-50 text-rose-700';
        else if (val === 'block') select.className = base + 'border-amber-200 bg-amber-50 text-amber-700';
        else if (val === 'na') select.className = base + 'border-slate-200 bg-slate-50 text-slate-500';
        else select.className = base + 'border-slate-200 bg-slate-100 text-slate-600';
      }

      function computeTaskStats(task) {
        const counts = countStatuses(task ? (task.tcs || []) : []);
        const total = task ? (task.tcs || []).length : 0;
        const passRate = total ? Math.round((counts.pass / total) * 100) : 0;
        return { total, pass: counts.pass, fail: counts.fail, block: counts.block, notTest: counts.notTest, na: counts.na, passRate };
      }

      function renderSummaryHeader(container, props) {
        if (!container) return;
        const { breadcrumb, stats, releaseSignal, activeAction } = props;
        const safePassRate = Math.max(0, Math.min(100, Number(stats.passRate) || 0));
        const totalCount = Number(stats.total) || 0;

        const segments = [
          { key: 'pass', value: Number(stats.pass) || 0, className: 'bg-emerald-500' },
          { key: 'fail', value: Number(stats.fail) || 0, className: 'bg-rose-500' },
          { key: 'block', value: Number(stats.block) || 0, className: 'bg-amber-500' },
          { key: 'notTest', value: Number(stats.notTest) || 0, className: 'bg-slate-400' },
          { key: 'na', value: Number(stats.na) || 0, className: 'bg-slate-300' }
        ];
        const segmentWidths = totalCount > 0
          ? segments.map(seg => Math.max(0, (seg.value / totalCount) * 100))
          : segments.map(() => 0);

        container.innerHTML = `
          <div class="bg-slate-50 border border-slate-200 rounded-2xl p-4">
            <div class="mb-4">
              <p class="text-xs text-slate-500">Breadcrumb</p>
              <p class="text-sm font-semibold text-slate-700">${breadcrumb}</p>
            </div>
            <div class="flex flex-wrap items-start justify-between gap-4">
              <div class="flex-1 min-w-[260px]">
                <p class="text-xs text-slate-500 mb-2">Quality Snapshot</p>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-xs text-slate-600">
                  <div class="flex items-center justify-between bg-white border border-slate-200 rounded-lg px-2 py-1"><span>Total</span><strong>${stats.total}</strong></div>
                  <div class="flex items-center justify-between bg-white border border-emerald-200 rounded-lg px-2 py-1"><span>Pass</span><strong>${stats.pass}</strong></div>
                  <div class="flex items-center justify-between bg-white border border-rose-200 rounded-lg px-2 py-1"><span>Fail</span><strong>${stats.fail}</strong></div>
                  <div class="flex items-center justify-between bg-white border border-amber-200 rounded-lg px-2 py-1"><span>Block</span><strong>${stats.block}</strong></div>
                  <div class="flex items-center justify-between bg-white border border-slate-200 rounded-lg px-2 py-1"><span>Not Tested</span><strong>${stats.notTest}</strong></div>
                  <div class="flex items-center justify-between bg-white border border-slate-200 rounded-lg px-2 py-1"><span>N/A</span><strong>${stats.na}</strong></div>
                </div>

                <div class="mt-3">
                  <div class="flex items-center justify-between text-xs text-slate-500 mb-1">
                    <span>Pass Rate</span>
                    <strong class="text-slate-700">${safePassRate}%</strong>
                  </div>
                  <div class="w-full h-2 rounded-full bg-slate-200 overflow-hidden">
                    <div class="h-full rounded-full bg-emerald-500" style="width: ${safePassRate}%"></div>
                  </div>
                </div>

                <div class="mt-3">
                  <div class="flex items-center justify-between text-xs text-slate-500 mb-1">
                    <span>Status Ratio</span>
                    <strong class="text-slate-700">${totalCount}</strong>
                  </div>
                  <div class="w-full h-2 rounded-full bg-slate-200 overflow-hidden flex">
                    ${segments.map((seg, idx) => `<div class="h-full ${seg.className}" style="width: ${segmentWidths[idx]}%"></div>`).join('')}
                  </div>
                </div>
              </div>

              <div class="min-w-[240px]">
                <p class="text-xs text-slate-500 mb-2">Release Signal</p>
                <p class="text-sm font-semibold text-slate-700">${releaseSignal.headline}</p>
                <p class="text-xs text-slate-500 mt-1">${releaseSignal.sub}</p>
                <div class="mt-3">
                  <button data-action="issues-link" class="text-xs text-indigo-600 hover:underline">Issues ë³´ê¸°</button>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      function getReleaseSignal(stats) {
        if (stats.block > 0) return { headline: 'âš ï¸ Block ì¼€ì´ìŠ¤ê°€ ìˆì–´ ì§„í–‰ì— ì œì•½ì´ ìˆì–´ìš”', sub: '> í™˜ê²½/ê¶Œí•œ/ì˜ì¡´ ì´ìŠˆ í™•ì¸ í›„ í•´ì†Œë˜ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”' };
        if (stats.fail > 0) return { headline: 'âš ï¸ Fail ì¼€ì´ìŠ¤ê°€ ìˆì–´ í™•ì¸ì´ í•„ìš”í•´ìš”', sub: '> ê´€ë ¨ ì´ìŠˆë¥¼ í™•ì¸í•˜ê³  ì¡°ì¹˜ í›„ ì¬ì‹¤í–‰ì„ ê¶Œì¥í•´ìš”' };
        const notTestRatio = stats.total ? (stats.notTest / stats.total) : 0;
        if (notTestRatio >= 0.3) return { headline: 'ğŸŸ¡ ì•„ì§ ì‹¤í–‰ë˜ì§€ ì•Šì€ TCê°€ ë§ì•„ìš”', sub: '> ìš°ì„ ìˆœìœ„ë¥¼ ì •í•´ ì ì§„ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•´ìš”' };
        if (stats.passRate >= 90) return { headline: 'âœ… ë¦´ë¦¬ì¦ˆ ê°€ëŠ¥í•´ ë³´ì—¬ìš”', sub: '> í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í•œ ë²ˆ ë” í™•ì¸í•˜ë©´ ë” ì•ˆì „í•´ìš”' };
        return { headline: 'ğŸŸ¡ ì§„í–‰ ì¤‘ì´ì—ìš”', sub: '> ë‚¨ì€ TC ì‹¤í–‰ê³¼ ê²°ê³¼ í™•ì¸ì„ ê³„ì† ì§„í–‰í•´ ì£¼ì„¸ìš”' };
      }

      function updateSummaryHeader() {
        if (!els.summaryHeader) return;
        const epic = getActiveEpic();
        const task = getActiveTask();
        const epicName = epic ? epic.name : '-';
        const taskName = task ? task.name : '-';
        const breadcrumb = `${state.milestoneTitle || 'ë§ˆì¼ìŠ¤í†¤'} > ${epicName} > ${taskName}`;
        const stats = computeTaskStats(task);
        const releaseSignal = getReleaseSignal(stats);
        renderSummaryHeader(els.summaryHeader, { breadcrumb, stats, releaseSignal, activeAction: activeSummaryAction });
      }

      function setReportTab(tab) {
        activeReportTab = tab;
        els.testCasesPanel.classList.toggle('hidden', tab !== 'test-cases');
        els.insightsPanel.classList.toggle('hidden', tab !== 'status-report');
        els.reportTabs.querySelectorAll('[data-report-tab]').forEach(btn => {
          const isActive = btn.dataset.reportTab === tab;
          btn.className = 'px-3 py-2 text-xs rounded-lg border ' +
            (isActive ? 'bg-slate-900 text-white' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50');
        });
      }

      function getActiveFilterKey() {
        if (!statusFilter || statusFilter.length === 0) return 'all';
        if (statusFilter.length === 1 && statusFilter[0] === 'not_test') return 'not-test';
        if (statusFilter.length === 1 && statusFilter[0] === 'na') return 'na';
        if (statusFilter.includes('fail') || statusFilter.includes('block')) return 'issues';
        return 'all';
      }

      function renderTcFilterTabs() {
        const tabs = [
          { key: 'all', label: 'All' },
          { key: 'not-test', label: 'Not Tested' },
          { key: 'issues', label: 'Issues' },
          { key: 'na', label: 'N/A' }
        ];
        const activeKey = getActiveFilterKey();
        els.tcFilterTabs.innerHTML = tabs.map(tab => {
          const isActive = tab.key === activeKey;
          const cls = isActive ? 'bg-slate-900 text-white' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50';
          return `<button data-filter="${tab.key}" class="px-3 py-1.5 text-xs rounded-full ${cls}">${tab.label}</button>`;
        }).join('');
      }

      function isViewAllMode() {
        return activeSummaryAction === 'all' && (!statusFilter || statusFilter.length === 0);
      }

      function updateTableEditToggleVisibility() {
        if (!els.tableEditToggle) return;
        if (!isAdmin) return;
        const shouldHide = !isViewAllMode();
        els.tableEditToggle.classList.toggle('hidden', shouldHide);
      }

      function getFilteredTcs(tcs) {
        if (!statusFilter || statusFilter.length === 0) return tcs;
        return tcs.filter(tc => statusFilter.includes(tc.status || 'not_test'));
      }

      function buildNumberMap(tcs) {
        const map = new Map();
        tcs.forEach((tc, idx) => map.set(tc.id, idx + 1));
        return map;
      }

      function scrollToTableTopAndFocus() {
        const reportSection = document.getElementById('reportSection');
        if (reportSection) reportSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        const firstSelect = els.tcBody.querySelector('select[data-field="status"]');
        if (firstSelect) firstSelect.focus();
      }

      function severityBadge(sev) {
        const v = (sev || 'medium').toLowerCase();
        if (v === 'critical') return `<span class="text-[10px] px-2 py-0.5 rounded-full bg-rose-50 text-rose-700 border border-rose-200">CRITICAL</span>`;
        if (v === 'high') return `<span class="text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200">HIGH</span>`;
        if (v === 'low') return `<span class="text-[10px] px-2 py-0.5 rounded-full bg-slate-50 text-slate-600 border border-slate-200">LOW</span>`;
        return `<span class="text-[10px] px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 border border-indigo-200">MEDIUM</span>`;
      }

      function renderInsights(task, stats) {
        const tcs = task ? (task.tcs || []) : [];
        const safeStats = stats || computeTaskStats(task);

        const failCases = tcs.filter(tc => tc.status === 'fail');
        const blockCases = tcs.filter(tc => tc.status === 'block');
        const naCases = tcs.filter(tc => tc.status === 'na');

        const notTestCount = Number(safeStats.notTest) || 0;
        const failCount = Number(safeStats.fail) || 0;
        const blockCount = Number(safeStats.block) || 0;
        const naCount = Number(safeStats.na) || 0;

        const insightParts = [];
        if (failCount > 0) insightParts.push(`Fail ${failCount}ê±´`);
        if (blockCount > 0) insightParts.push(`Block ${blockCount}ê±´`);
        if (notTestCount > 0) insightParts.push(`Not Tested ${notTestCount}ê±´`);

        const coverageText = insightParts.length > 0
          ? `${insightParts.join('ê³¼ ')}ìœ¼ë¡œ ì•„ì§ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ì¶©ë¶„í•˜ì§€ ì•Šì•„ìš”.`
          : 'í˜„ì¬ í° ì´ìŠˆëŠ” ë³´ì´ì§€ ì•Šì•„ìš”. ì „ì²´ ì¼€ì´ìŠ¤ë¥¼ í™•ì¸í•˜ë©° ë§ˆë¬´ë¦¬í•´ ì£¼ì„¸ìš”.';
        const naText = naCount > 0 ? `N/A ${naCount}ê±´ì€ ë²”ìœ„ ì œì™¸ í•­ëª©ì´ì—ìš”.` : '';
        const insightText = naText ? `${coverageText} ${naText}` : coverageText;

        const renderIssueList = (cases) => {
          if (!cases || cases.length === 0) return '<p class="text-xs text-slate-500">í•´ë‹¹ ì¼€ì´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
          return `
            <ul class="space-y-2">
              ${cases.map(tc => {
                const issue = tc.issue || {};
                const hasIssue = !!(issue.title || issue.content || issue.attachmentName);
                return `
                  <li class="text-xs text-slate-700 border border-slate-200 rounded-xl p-3 bg-white">
                    <div class="flex items-center justify-between gap-2">
                      <div class="min-w-0">
                        <div class="flex items-center gap-2">
                          <span class="font-semibold">${tc.id}</span>
                          ${hasIssue ? severityBadge(issue.severity) : `<span class="text-[10px] px-2 py-0.5 rounded-full bg-slate-50 text-slate-500 border border-slate-200">NO ISSUE</span>`}
                        </div>
                        <div class="text-slate-500 mt-1">${escapeHtml(tc.content || tc.middle || 'ì œëª© ì—†ìŒ')}</div>
                      </div>
                      <button data-report-action="open-issue" data-tc="${tc.id}" class="text-xs px-3 py-1 rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50">ì´ìŠˆ ë³´ê¸°</button>
                    </div>
                    ${hasIssue ? `
                      <div class="mt-2 text-slate-600">
                        <div class="text-xs"><span class="text-slate-400">ì œëª©:</span> ${escapeHtml(issue.title || '(ì—†ìŒ)')}</div>
                        <div class="text-xs mt-1 whitespace-pre-wrap"><span class="text-slate-400">ë‚´ìš©:</span> ${escapeHtml(issue.content || '(ì—†ìŒ)')}</div>
                        <div class="text-xs mt-1"><span class="text-slate-400">ì²¨ë¶€:</span> ${escapeHtml(issue.attachmentName || '(ì—†ìŒ)')}</div>
                      </div>
                    ` : `<div class="mt-2 text-xs text-slate-500">ì´ìŠˆ ë‚´ìš©ì´ ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì•˜ì–´ìš”.</div>`}
                  </li>
                `;
              }).join('')}
            </ul>
          `;
        };

        const renderNaCaseList = (cases) => {
          if (!cases || cases.length === 0) return '<p class="text-xs text-slate-500">í•´ë‹¹ ì¼€ì´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
          return `
            <ul class="space-y-2">
              ${cases.map(tc => `
                <li class="text-xs text-slate-700">
                  <div>
                    <span class="font-semibold">${tc.id}</span>
                    <span class="text-slate-500">Â·</span>
                    <span>${escapeHtml(tc.content || tc.middle || 'ì œëª© ì—†ìŒ')}</span>
                  </div>
                  <div class="text-xs text-slate-500 mt-1">${escapeHtml(tc.memo || '(ì‚¬ìœ  ë©”ëª¨ ì—†ìŒ)')}</div>
                </li>
              `).join('')}
            </ul>
          `;
        };

        els.insightsContent.innerHTML = `
          <div class="space-y-5">
            <div>
              <p class="text-sm
::contentReference[oaicite:0]{index=0}
```
